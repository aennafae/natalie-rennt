<div class="container-flex app-container" [ngClass]="pageLoaded ? 'visible' : ''">
  <div class="row" *ngIf="pageLoaded">

    <div class="container">
      <div class="col">
        <h1>Natalie Rennt bis nach Berlin!</h1>
        <h2>
          UnterstÃ¼tze Sie & laufe mit! Dein Lauf mit deiner
          KM-Zahl hoch.
        </h2>
  
        <div class="d-flex justify-content-between align-items-center">
          <div class="km-current d-flex align-items-center">
            <mat-spinner [diameter]="40" *ngIf="!kilometer"></mat-spinner>{{ kilometer | async}} km</div>
          <div class="km-left">{{ kilometerMax }} km</div>
        </div>
        <div class="d-flex justify-content-end mt-3">
          <div>100 Tage verbleiben</div>
        </div>
      </div>
    </div>
  </div>
  <div class="row my-4">
    <div class="col text-center">
      <button id="add-card-button"
        mat-fab
        class="dialog-button"
        (click)="openDialog()"
        title="Lade deinen Lauf hoch">+
      </button>
    </div>
  </div>

  <div class="row">
    <div class="col-4" *ngIf="runsFirst">
      <ng-container *ngTemplateOutlet="runItem;context:{runsx: runsLeft}"></ng-container> 
    </div>

    <div class="col-4 text-center map-container p-0">
      <img src="./assets/deutschlandkarte-lauf.png"  class="map-image"/>
      <div class="map-progress" [style.width]="mapKmWidth"></div>
    </div>

    <div class="col-4" *ngIf="runsFirst">
      <ng-container *ngTemplateOutlet="runItem;context:{runsx: runsRight}"></ng-container> 
    </div>

    <div class="col-12" *ngIf="runsFirst">
      <div class="d-flex flex-wrap">
        <ng-container *ngTemplateOutlet="runItem;context:{runsx: runsBottom}"></ng-container> 
      </div>
    </div>

    <div class="col-12 text-center" *ngIf="showLoadMoreButton">
      <button id="load-more-runs-button"
      mat-raised-button	
      (click)="showMoreRuns()"
      title="Lade mehr">
      <div class="d-flex align-items-center">
        Mehr laden
        <mat-spinner [diameter]="20" class="ml-2" *ngIf="runsLoading"></mat-spinner>
      </div>
    </button>
      </div>
  </div>
</div>

<mat-spinner [diameter]="100" class="page-loading-spinner" *ngIf="!pageLoaded"></mat-spinner>

<ng-template #runItem let-runsx="runsx">
  <div class="run-item my-2 mx-2 p-2" *ngFor="let run of runsx">
    {{run.key}}
    <div class="run-item__name">
      {{ run.vorname }}
      {{ run.name }}
    </div>

    <div class="run-item__datum">{{ run.datum}}</div>
    <div class="run-item__km">{{ run.km }} km</div>
    <div class="run-item__km">{{ run.ort }}</div>
  </div>
</ng-template>
